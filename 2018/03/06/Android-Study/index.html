<!DOCTYPE HTML><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="google-site-verification" content=""><title>Android Study</title><meta name="author" content="帅妹妹"><meta name="description" content="励志考研"><meta property="og:title" content="Android Study"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:site_name" content="帅妹妹"><link href="/apple-touch-icon-precomposed.png" sizes="180x180" rel="apple-touch-icon-precomposed"><link rel="alternate" href="/atom.xml" title="帅妹妹" type="application/atom+xml"><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css"><link rel="stylesheet" href="/css/m.min.css"><link rel="icon" type="image/x-icon" href="/favicon.ico"></head><body><a id="top"></a><div id="main"><div class="behind"><a href="/" class="back black-color"><svg class="i-close" viewBox="0 0 32 32" width="22" height="22" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="M2 30 L30 2 M30 30 L2 2"></path></svg></a><div class="description">&nbsp;今晚的月色真美</div></div><div class="main-ctnr"><article class="standard post"><div class="title"><h1 class="page-title center">Android Study</h1></div><div class="meta center"><time datetime="2018-03-06T13:59:45.000Z"><svg class="i-calendar" viewBox="0 0 32 32" width="14" height="14" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M2 6 L2 30 30 30 30 6 Z M2 15 L30 15 M7 3 L7 9 M13 3 L13 9 M19 3 L19 9 M25 3 L25 9"></path></svg> &nbsp; 2018-03-06 </time>&nbsp; <svg class="i-tag" viewBox="0 0 32 32" width="14" height="14" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="24" cy="8" r="2"></circle><path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path></svg> &nbsp; <a href="/categories/Android/">Android</a> &nbsp; <svg class="i-tag" viewBox="0 0 32 32" width="14" height="14" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="24" cy="8" r="2"></circle><path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path></svg> &nbsp; <a href="/tags/Android/">Android</a></div><hr><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#基础知识"><span class="toc-text">基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Toast"><span class="toc-text">Toast</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Intent"><span class="toc-text">Intent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Handler"><span class="toc-text">Handler</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是-SharedPreferences"><span class="toc-text">什么是 SharedPreferences</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何使用-SharedPreferences"><span class="toc-text">如何使用 SharedPreferences</span></a></li></ol></li></ol><div class="picture-container"></div><a id="more"></a><h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><h2 id="Toast"><a href="#Toast" class="headerlink" title="Toast"></a>Toast</h2><p>Toast是通知用户时经常用的一种方法，主要用法如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Toast.makeText(v.getContext(), <span class="string">"用户名或密码不正确"</span>, Toast.LENGTH_SHORT).show();</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"用户名或密码不正确"</span>, Toast.LENGTH_SHORT).show();</span><br></pre></td></tr></table></figure>
<p>第一个参数：联系上下文；有两种写法，第一种是v.getContext()获取上下文；第二种是MainActicity.this获取上下文。<br>第二个参数：提示用户的语句<br>第三个参数：响应时间的长短<br>最后别忘了使用show()方法展示Toast。</p>
<h2 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h2><p>Intent：意图，用于activity的转换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent i = <span class="keyword">new</span> Intent();</span><br><span class="line">i.setClass(MainActivity.<span class="keyword">this</span>, Main2Activity.class);</span><br><span class="line">startActivity(i);</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent i = <span class="keyword">new</span> Intent();</span><br><span class="line">i.setClass(MainActivity.<span class="keyword">this</span>, Main2Activity.class);</span><br><span class="line">startActivity(i);</span><br></pre></td></tr></table></figure>
<p>使用Intent传输数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, Main2Activity.class);</span><br><span class="line">intent.putExtra(<span class="string">"key"</span>, <span class="number">123</span>);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>
<p>在转入界面：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent_2 = getIntent();</span><br><span class="line">String data = intent_2.getStringExtra(<span class="string">"key"</span>);</span><br><span class="line">Log.i(<span class="string">"Key"</span>, data);</span><br></pre></td></tr></table></figure>
<h2 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main3Activity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Button startButton, endButton;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main3);</span><br><span class="line"></span><br><span class="line">        startButton = (Button) findViewById(R.id.startButton);</span><br><span class="line">        endButton = (Button) findViewById(R.id.endButton);</span><br><span class="line"></span><br><span class="line">        startButton.setOnClickListener(<span class="keyword">new</span> startButtonListener());</span><br><span class="line">        endButton.setOnClickListener(<span class="keyword">new</span> endButtonListener());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">startButtonListener</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">            handler.post(updateThread);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">endButtonListener</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            handler.removeCallbacks(updateThread);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Handler handler = <span class="keyword">new</span> Handler();</span><br><span class="line">    Runnable updateThread = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.printf(<span class="string">"update"</span>);</span><br><span class="line">            Log.i(<span class="string">"do?"</span>,<span class="string">"update"</span>);</span><br><span class="line">            handler.postDelayed(updateThread, <span class="number">3000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>类似于队列，每次调用handler就使消息发出，通过线程调用run方法。异步线程处理方案</p>
<h2 id="什么是-SharedPreferences"><a href="#什么是-SharedPreferences" class="headerlink" title="什么是 SharedPreferences"></a>什么是 SharedPreferences</h2><p>SharedPreferences，说到底就是一个存储机制。但是不像 SQLite 那样存储大容量大数据，适合存储可以用键值对表达的小数据，例如账号和密码(但是密码要进行加密处理)</p>
<h2 id="如何使用-SharedPreferences"><a href="#如何使用-SharedPreferences" class="headerlink" title="如何使用 SharedPreferences"></a>如何使用 SharedPreferences</h2><p>例如实现记住密码功能：需要存储两个数据，一个 account，一个 password，将其以键值对的形式储存起来。</p>
<p>首先创建一个 SharedPreferences 对象和一个 SharedPreferences.edit 分别用来读取数据和写入数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> SharedPreferences sharedPreferences;</span><br><span class="line"><span class="keyword">private</span> SharedPreferences.Editor editor;</span><br></pre></td></tr></table></figure>
<p>sharedPreferences 用来读取数据，editor 用来写入数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sharedPreferences=getSharedPreferences(<span class="string">"import"</span>,MODE_PRIVATE);</span><br><span class="line">editor =getSharedPreferences(<span class="string">"import"</span>,MODE_PRIVATE).edit();</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">editor.putString(<span class="string">"ac"</span>, x);</span><br><span class="line">editor.putString(<span class="string">"pw"</span>, y);</span><br><span class="line">editor.apply();</span><br></pre></td></tr></table></figure>
<p>就这样以键值对的形式存储数据</p>
<p>读取数据只需要得到响应的 key 就可以:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String a = sharedPreferences.getString(<span class="string">"ac"</span>, <span class="string">"123"</span>);</span><br><span class="line">String b = sharedPreferences.getString(<span class="string">"pw"</span>, <span class="string">"123"</span>);</span><br><span class="line"></span><br><span class="line">username.setText(a);</span><br><span class="line">password.setText(b);</span><br></pre></td></tr></table></figure>


  </article>
  
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <div class="busuanzi center">
    页阅读量:&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;・&nbsp;
    站访问量:&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;・&nbsp;
    站访客数:&nbsp;<span id="busuanzi_value_site_uv"></span>
  </div>




    </div>
  </div>
  <footer class="page-footer"><div class="clearfix">
</div>
<div class="right-foot">
    <div class="firstrow">
        <a href="#top" target="_self">
        <svg class="i-caret-right" viewBox="0 0 32 32" width="24" height="24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
            <path d="M10 30 L26 16 10 2 Z"></path>
        </svg>
        </a>
        
    </div>
    <div class="secondrow">
        <a href="https://github.com/gaoryrt/hexo-theme-pln">
        Theme Pln
        </a>
    </div>
</div>
<div class="clearfix">
</div>
</footer>
  <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<script src="/js/search.min.js"></script>
<script type="text/javascript">$(".dropdown").click(function(o){var n=$(this);o.stopPropagation(),$(n).children(".dropdown-content")[$(n).children(".dropdown-content").hasClass("open")?"removeClass":"addClass"]("open")}),$(document).click(function(){$(".dropdown-content").removeClass("open")});var path="/search.xml";searchFunc(path,"local-search-input","local-search-result")</script></body></html>